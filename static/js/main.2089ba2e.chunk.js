(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/sprout-logo.512d9f3b.svg"},22:function(e,t,a){e.exports=a(37)},27:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var o=a(1),n=a.n(o),r=a(18),s=a.n(r),l=a(6),c=a(7),i=a(9),u=a(8),d=a(10),h=(a(27),a(19)),b=a.n(h),m=function(){return n.a.createElement("div",{className:"list-books-title"},n.a.createElement("div",{className:"nav-container"},n.a.createElement("div",{className:"nav-title"},n.a.createElement("h1",null,"Book Sprout"),n.a.createElement("p",{className:"nav-subtitle"},"Grow your reading")),n.a.createElement("div",{className:"sprout-logo"},n.a.createElement("img",{src:b.a,alt:"sprout logo"}))))},f=a(21),k=a(4),p=function(e){var t=e.title.toLowerCase().split(" ").join(""),a=e.booksMap.filter(function(e){return e.props.shelf.toLowerCase()===t});return n.a.createElement("div",{className:"bookshelf"},n.a.createElement("h2",{className:"bookshelf-title"},e.title),n.a.createElement("div",{className:"bookshelf-books"},n.a.createElement("ol",{className:"books-grid"},0===a.length?"Add a book to this shelf":a)))},v=function(e){return n.a.createElement("div",{className:"book-shelf-changer"},n.a.createElement("select",{value:e.shelf,onChange:function(t){e.bookListHandler(e.id),e.bookShelfHandler(t.target.value,e.id),function(e,t){var a={method:"PUT",headers:{Authorization:"JimmyAllDayWantsBooksData","Content-Type":"application/json"},body:JSON.stringify({shelf:e})};fetch("https://reactnd-books-api.udacity.com/books/".concat(t),a).catch(function(e){console.error("Error:",e)})}(t.target.value,e.id)}},n.a.createElement("option",{value:"move",disabled:!0},"Move to..."),n.a.createElement("option",{value:"wantToRead"},"Want to Read"),n.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),n.a.createElement("option",{value:"read"},"Read"),n.a.createElement("option",{value:"none"},"None")))},E=function(e){function t(e){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).call(this))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.image,a=e.title,o=e.authors;return n.a.createElement("li",null,n.a.createElement("div",{className:"book"},n.a.createElement("div",{className:"book-top"},n.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(t,'")')}}),n.a.createElement(v,{shelf:this.props.shelf,id:this.props.id,bookShelfHandler:this.props.bookShelfHandler,bookListHandler:this.props.bookListHandler})),n.a.createElement("div",{className:"book-title"},a),n.a.createElement("div",{className:"book-authors"},o)))}}]),t}(o.Component),g=a(5),j=function(e){return n.a.createElement("div",{className:"search-books-results"},n.a.createElement("ol",{className:"books-grid"},e.foundBooks))},N=function(e){return n.a.createElement("div",null,n.a.createElement("div",{className:"search-books"},n.a.createElement("div",{className:"search-books-bar"},n.a.createElement(g.b,{to:"/"},n.a.createElement("button",{className:"close-search"},"Close")),n.a.createElement("div",{className:"search-books-input-wrapper"},n.a.createElement("input",{type:"search",placeholder:"Search by title or author",onChange:function(t){e.getBooks(t.target.value)}})))),n.a.createElement(j,{bookShelfHandler:e.bookShelfHandler,bookListHandler:e.bookListHandler,foundBooks:e.foundBooks}))},y=function(){return n.a.createElement("div",{className:"open-search"},n.a.createElement(g.b,{to:"/search"},n.a.createElement("button",null,"Add a book")))},O=a(0),H=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).validateSearch=function(t){t.trim(),""!==t&&e.setState(function(){return{search:t}})},e.getBooks=function(t){var a=e.state.foundBooks.splice(0,e.state.foundBooks.length),o=function(){e.setState({noBooks:a})},n={method:"POST",headers:{Authorization:e.authHeader,"Content-Type":"application/json"},body:JSON.stringify({query:t,maxResults:20})};""!==t&&fetch("".concat(e.initURL,"/search"),n).then(function(e){return e.json()}).then(function(t){t.error||t.books.error||t.books===[]?o():function(t){var a=function(e,t){return e.filter(function(e){return!t.find(function(t){return t.id===e.id})})},o=a(t,e.state.books),n=a(e.state.books,t),r=a(o.concat(e.state.books),n);e.setState(function(){return{foundBooks:r}})}(t.books)}).catch(null),""===t&&o()},e.bookListHandler=function(t){var a=null;e.state.foundBooks.forEach(function(o){o.id===t&&(a=e.state.foundBooks.indexOf(o))});var o=e.state.foundBooks.splice(a,1),n=function(e,t){var a=[];if(t.length>0){var o=t[0].id;e.forEach(function(t,n){return o===t.id?e.splice(n,-1):a.push(t)})}else e.forEach(function(e){a.push(e)});return a.concat(t)}(e.state.books,o);e.setState({books:n})},e.state={books:[],search:"",foundBooks:[]},e.initURL="https://reactnd-books-api.udacity.com",e.authHeader="JimmyAllDayWantsBooksData",e.options={headers:{Authorization:e.authHeader}},e.getBooks=e.getBooks.bind(Object(k.a)(Object(k.a)(e))),e.bookShelfHandler=e.bookShelfHandler.bind(Object(k.a)(Object(k.a)(e))),e.bookListHandler=e.bookListHandler.bind(Object(k.a)(Object(k.a)(e))),e.validateSearch=e.validateSearch.bind(Object(k.a)(Object(k.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.initURL,"/books"),this.options).then(function(e){return e.json()}).then(function(t){e.setState(function(){return{books:t.books}})})}},{key:"bookShelfHandler",value:function(e,t){this.setState(function(a){return{books:a.books.map(function(a){return a.id===t?Object(f.a)({},a,{shelf:e}):a})}})}},{key:"render",value:function(){var e=this,t=function(t){return t.map(function(t){return n.a.createElement(E,{key:t.id,id:t.id,image:t.imageLinks?t.imageLinks.smallThumbnail:null,title:t.title,authors:t.authors,shelf:t.shelf?t.shelf:"none",bookShelfHandler:e.bookShelfHandler,bookListHandler:e.bookListHandler})})},a=["Want to Read","Currently Reading","Read"];return n.a.createElement("div",{className:"bookshelf"},n.a.createElement(O.a,{exact:!0,path:"/",render:function(){return n.a.createElement("div",{className:"list-books-content"},(o=t(e.state.books),a.map(function(e){return n.a.createElement(p,{key:e,booksMap:o,title:e})})),n.a.createElement(y,null));var o}}),n.a.createElement(O.a,{path:"/search",render:function(){return n.a.createElement(N,{bookShelfHandler:e.bookShelfHandler,bookListHandler:e.bookListHandler,foundBooks:t(e.state.foundBooks),getBooks:e.getBooks})}}))}}]),t}(o.Component),S=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"app"},n.a.createElement("div",{className:"list-books"},n.a.createElement(m,null),n.a.createElement(H,null)))}}]),t}(n.a.Component);a(35);s.a.render(n.a.createElement(g.a,null,n.a.createElement(S,null)),document.getElementById("root"))}},[[22,2,1]]]);
//# sourceMappingURL=main.2089ba2e.chunk.js.map